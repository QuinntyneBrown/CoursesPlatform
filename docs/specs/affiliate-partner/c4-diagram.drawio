<mxfile host="app.diagrams.net" modified="2025-12-25T00:00:00.000Z" agent="5.0" version="22.0.0" type="device">
  <diagram name="C4 Container - Affiliate Partner" id="c4-affiliate-partner">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Affiliate Partner System - C4 Container Diagram" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="320" y="20" width="530" height="30" as="geometry" />
        </mxCell>

        <!-- Affiliate Person -->
        <mxCell id="affiliate" value="&lt;b&gt;Affiliate&lt;/b&gt;&lt;br&gt;[Person]&lt;br&gt;&lt;br&gt;Course creator or marketer who promotes courses and earns commissions" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#08427B;strokeColor=#052E56;fontColor=#FFFFFF;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="80" y="100" width="160" height="120" as="geometry" />
        </mxCell>

        <!-- Customer Person -->
        <mxCell id="customer" value="&lt;b&gt;Customer&lt;/b&gt;&lt;br&gt;[Person]&lt;br&gt;&lt;br&gt;User who clicks affiliate link and purchases courses" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#08427B;strokeColor=#052E56;fontColor=#FFFFFF;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="280" y="100" width="160" height="120" as="geometry" />
        </mxCell>

        <!-- Admin Person -->
        <mxCell id="admin" value="&lt;b&gt;Administrator&lt;/b&gt;&lt;br&gt;[Person]&lt;br&gt;&lt;br&gt;System admin who manages affiliates and processes payouts" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#08427B;strokeColor=#052E56;fontColor=#FFFFFF;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="930" y="100" width="160" height="120" as="geometry" />
        </mxCell>

        <!-- System Boundary -->
        <mxCell id="system-boundary" value="CoursesPlatform System" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#666666;strokeWidth=2;dashed=1;fontSize=14;fontStyle=1;verticalAlign=top;align=left;" vertex="1" parent="1">
          <mxGeometry x="40" y="280" width="1090" height="480" as="geometry" />
        </mxCell>

        <!-- Angular Web App Container -->
        <mxCell id="webapp" value="&lt;b&gt;Angular Web Application&lt;/b&gt;&lt;br&gt;[Container: Angular 18+]&lt;br&gt;&lt;br&gt;Provides affiliate dashboard, link generator, earnings reports, and payout requests via responsive web interface. Uses Angular Material 3 and RxJS." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#438DD5;strokeColor=#2E6295;fontColor=#FFFFFF;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="80" y="340" width="360" height="140" as="geometry" />
        </mxCell>

        <!-- API Container -->
        <mxCell id="api" value="&lt;b&gt;API Application&lt;/b&gt;&lt;br&gt;[Container: .NET 8 Web API]&lt;br&gt;&lt;br&gt;Provides affiliate registration, link generation, commission tracking, and payout management via REST API. Uses MediatR CQRS pattern." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#438DD5;strokeColor=#2E6295;fontColor=#FFFFFF;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="540" y="340" width="360" height="140" as="geometry" />
        </mxCell>

        <!-- Database Container -->
        <mxCell id="database" value="&lt;b&gt;Database&lt;/b&gt;&lt;br&gt;[Container: SQL Server Express]&lt;br&gt;&lt;br&gt;Stores affiliate data, links, commissions, payouts. Tables: Affiliates, AffiliateLinks, Commissions, AffiliatePayouts." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#438DD5;strokeColor=#2E6295;fontColor=#FFFFFF;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="540" y="570" width="360" height="140" as="geometry" />
        </mxCell>

        <!-- Background Jobs Container -->
        <mxCell id="background-jobs" value="&lt;b&gt;Background Jobs&lt;/b&gt;&lt;br&gt;[Container: .NET Hosted Service]&lt;br&gt;&lt;br&gt;Auto-approves commissions after refund period. Detects suspicious activity. Runs scheduled tasks." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#438DD5;strokeColor=#2E6295;fontColor=#FFFFFF;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="80" y="570" width="360" height="140" as="geometry" />
        </mxCell>

        <!-- Payment Service External -->
        <mxCell id="payment-service" value="&lt;b&gt;Payment Service&lt;/b&gt;&lt;br&gt;[External System]&lt;br&gt;&lt;br&gt;External payment processor for affiliate payouts (PayPal, Bank Transfer, etc.)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;fontColor=#FFFFFF;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="950" y="570" width="160" height="120" as="geometry" />
        </mxCell>

        <!-- Email Service External -->
        <mxCell id="email-service" value="&lt;b&gt;Email Service&lt;/b&gt;&lt;br&gt;[External System]&lt;br&gt;&lt;br&gt;Sends notifications for tier changes, commission approvals, payout updates" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;fontColor=#FFFFFF;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="950" y="340" width="160" height="120" as="geometry" />
        </mxCell>

        <!-- Relationships -->

        <!-- Affiliate to WebApp -->
        <mxCell id="rel-affiliate-webapp" value="Manages affiliate account, generates links, views earnings, requests payouts" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;fontSize=10;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="affiliate" target="webapp">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="160" y="280" />
              <mxPoint x="170" y="280" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Customer to WebApp -->
        <mxCell id="rel-customer-webapp" value="Clicks affiliate links, browses courses, makes purchases" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="customer" target="webapp">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="360" y="280" />
              <mxPoint x="260" y="280" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Admin to WebApp -->
        <mxCell id="rel-admin-webapp" value="Manages affiliates, processes payouts, views analytics" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;fontSize=10;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="admin" target="webapp">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1010" y="280" />
              <mxPoint x="350" y="280" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- WebApp to API -->
        <mxCell id="rel-webapp-api" value="Makes API calls to&lt;br&gt;[HTTPS/JSON]" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="webapp" target="api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- API to Database -->
        <mxCell id="rel-api-database" value="Reads from and writes to&lt;br&gt;[Entity Framework Core]&lt;br&gt;via ICoursesPlatformContext" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="api" target="database">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Background Jobs to Database -->
        <mxCell id="rel-jobs-database" value="Queries and updates&lt;br&gt;commissions&lt;br&gt;[Entity Framework Core]" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="background-jobs" target="database">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- API to Email Service -->
        <mxCell id="rel-api-email" value="Sends notifications&lt;br&gt;[SMTP/API]" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;startArrow=none;startFill=0;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="api" target="email-service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- API to Payment Service -->
        <mxCell id="rel-api-payment" value="Processes payouts&lt;br&gt;[REST API]&lt;br&gt;(manual process)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;startArrow=none;startFill=0;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="api" target="payment-service">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="920" y="445" />
              <mxPoint x="920" y="630" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="50" y="780" width="60" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend-person" value="Person" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#08427B;strokeColor=#052E56;fontColor=#FFFFFF;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="150" y="780" width="80" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-container" value="Container" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#438DD5;strokeColor=#2E6295;fontColor=#FFFFFF;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="780" width="80" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-external" value="External System" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;fontColor=#FFFFFF;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="350" y="780" width="100" height="30" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
