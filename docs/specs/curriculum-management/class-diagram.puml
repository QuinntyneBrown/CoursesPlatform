@startuml Curriculum Management Class Diagram

title Curriculum Management - Class Diagram

package "Section Aggregate" {
    class Section {
        +SectionId: Guid
        +CourseId: Guid
        +Title: string
        +LearningObjectives: string
        +OrderPosition: int
        +Status: SectionStatus
        +CreatedAt: DateTime
        +UpdatedAt: DateTime
        +PublishedAt: DateTime
        --
        +Create(courseId, title): Section
        +UpdateTitle(title): void
        +UpdateLearningObjectives(objectives): void
        +Reorder(position): void
        +Publish(): void
        +Unpublish(): void
        +Delete(): void
    }

    enum SectionStatus {
        Draft
        Published
        Archived
    }
}

package "Lecture Aggregate" {
    class Lecture {
        +LectureId: Guid
        +SectionId: Guid
        +CourseId: Guid
        +Title: string
        +Description: string
        +Type: LectureType
        +OrderPosition: int
        +IsPreview: bool
        +Status: LectureStatus
        +DurationSeconds: int
        +CreatedAt: DateTime
        +UpdatedAt: DateTime
        +PublishedAt: DateTime
        --
        +Create(sectionId, title, type): Lecture
        +UpdateTitle(title): void
        +UpdateDescription(description): void
        +SetPreview(isPreview): void
        +Reorder(position): void
        +MoveTo(sectionId): void
        +Publish(): void
        +Unpublish(): void
        +Delete(): void
    }

    enum LectureType {
        Video
        Article
        Quiz
    }

    enum LectureStatus {
        Draft
        Published
        Archived
    }
}

package "Video Content Aggregate" {
    class VideoContent {
        +VideoContentId: Guid
        +LectureId: Guid
        +OriginalFileName: string
        +DurationSeconds: int
        +ProcessingStatus: ProcessingStatus
        +UploadedAt: DateTime
        +ProcessedAt: DateTime
        --
        +Create(lectureId, fileName): VideoContent
        +StartProcessing(): void
        +CompleteProcessing(duration): void
        +FailProcessing(error): void
        +Delete(): void
    }

    class VideoQuality {
        +VideoQualityId: Guid
        +VideoContentId: Guid
        +Resolution: Resolution
        +Bitrate: int
        +FileSize: long
        +StorageUrl: string
        +CreatedAt: DateTime
        --
        +Create(videoId, resolution, url): VideoQuality
    }

    enum ProcessingStatus {
        Uploading
        Uploaded
        Processing
        Completed
        Failed
    }

    enum Resolution {
        SD_360p
        HD_720p
        FHD_1080p
    }
}

package "Caption Aggregate" {
    class Caption {
        +CaptionId: Guid
        +VideoContentId: Guid
        +Language: string
        +FileName: string
        +Format: CaptionFormat
        +StorageUrl: string
        +IsAutoGenerated: bool
        +CreatedAt: DateTime
        +UpdatedAt: DateTime
        --
        +Create(videoId, language, url): Caption
        +Update(content): void
        +Delete(): void
    }

    enum CaptionFormat {
        WebVTT
        SRT
        SBV
    }
}

package "Article Content Aggregate" {
    class ArticleContent {
        +ArticleContentId: Guid
        +LectureId: Guid
        +Body: string
        +ReadTimeMinutes: int
        +Version: int
        +CreatedAt: DateTime
        +UpdatedAt: DateTime
        --
        +Create(lectureId, body): ArticleContent
        +Update(body): void
        +CalculateReadTime(): int
        +Delete(): void
    }

    class ArticleMedia {
        +ArticleMediaId: Guid
        +ArticleContentId: Guid
        +MediaType: MediaType
        +Url: string
        +AltText: string
        +Position: int
        --
        +Embed(articleId, type, url): ArticleMedia
        +Remove(): void
    }

    enum MediaType {
        Image
        Video
        CodeSnippet
    }
}

package "Resource Aggregate" {
    class DownloadableResource {
        +ResourceId: Guid
        +LectureId: Guid
        +Title: string
        +Description: string
        +FileName: string
        +FileSize: long
        +MimeType: string
        +StorageUrl: string
        +DownloadCount: int
        +CreatedAt: DateTime
        +UpdatedAt: DateTime
        --
        +Create(lectureId, title, fileName): DownloadableResource
        +UpdateMetadata(title, description): void
        +Replace(fileName, url): void
        +IncrementDownloadCount(): void
        +Delete(): void
    }

    class ResourceDownload {
        +DownloadId: Guid
        +ResourceId: Guid
        +UserId: Guid
        +DownloadedAt: DateTime
        +IpAddress: string
        --
        +Record(resourceId, userId): ResourceDownload
    }
}

Section "1" --> "*" Lecture : contains
Lecture "1" --> "0..1" VideoContent : has
Lecture "1" --> "0..1" ArticleContent : has
Lecture "1" --> "*" DownloadableResource : attachedTo
VideoContent "1" --> "*" VideoQuality : has
VideoContent "1" --> "*" Caption : has
ArticleContent "1" --> "*" ArticleMedia : contains
DownloadableResource "1" --> "*" ResourceDownload : tracks

@enduml
